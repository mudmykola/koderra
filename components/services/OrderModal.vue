<script setup>import {ref, watch} from 'vue'import {useTelegramBot} from '~/composables/useTelegramBot'const props = defineProps({  isOpen: Boolean,  service: Object})const emits = defineEmits(['close'])const form = ref({  name: '',  email: '',  phone: '',  message: ''})const loading = ref(false)const success = ref(false)const {sendOrderMessage} = useTelegramBot()const resetForm = () => {  form.value = {name: '', email: '', phone: '', message: ''}  success.value = false}const close = () => {  emits('close')  resetForm()}const validate = () => {  const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(form.value.email)  const phoneValid = /^\+?\d{10,15}$/.test(form.value.phone.trim())  return form.value.name && emailValid && phoneValid}const submit = async () => {  if (!validate()) {    alert('–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö')    return  }  loading.value = true  try {    await sendOrderMessage({      name: form.value.name,      email: form.value.email,      phone: form.value.phone,      message: form.value.message,      service: props.service?.title,    })    success.value = true    setTimeout(() => {      close()    }, 3000)  } catch (err) {    alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.')  }  loading.value = false}</script><template>  <div class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center px-4">    <div class="bg-brand-dark text-white p-8 rounded-2xl w-full max-w-lg shadow-xl relative">      <button @click="close" class="absolute top-4 right-4 text-white text-xl">‚úï</button>      <h2 class="text-2xl font-bold mb-4">–ó–∞–º–æ–≤–∏—Ç–∏: {{ service?.title }}</h2>      <p class="text-white/60 mb-6">{{ service?.description }}</p>      <form @submit.prevent="submit" class="space-y-4">        <input            v-model="form.name"            type="text"            placeholder="–í–∞—à–µ —ñ–º‚Äô—è"            class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50"            required        />        <input            v-model="form.email"            type="email"            placeholder="Email"            class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50"            required        />        <input            v-model="form.phone"            type="tel"            placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"            class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50"            required        />        <textarea            v-model="form.message"            rows="4"            placeholder="–ö–æ–º–µ–Ω—Ç–∞—Ä –∞–±–æ –ø–æ–±–∞–∂–∞–Ω–Ω—è"            class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50"        />        <button            type="submit"            class="relative cursor-pointer mt-6 w-full bg-gradient-to-r from-brand via-brand-lime to-brand-lime         text-black font-heading text-lg px-6 py-3 rounded-full font-semibold         shadow-lg hover:shadow-brand-lime/60 active:scale-95 transition-all duration-300 ease-in-out         disabled:opacity-50 group overflow-hidden"            :disabled="loading"        >          <div class="flex items-center justify-center gap-2">            <template v-if="loading">              <svg class="animate-spin h-5 w-5 text-black" xmlns="http://www.w3.org/2000/svg" fill="none"                   viewBox="0 0 24 24">                <circle class="opacity-20" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>                <path class="opacity-70" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"/>              </svg>              <span class="text-black">–í—ñ–¥–ø—Ä–∞–≤–∫–∞...</span>            </template>            <template v-else>      <span class="text-white transition-all duration-300 ease-in-out group-hover:tracking-wider">        –ù–∞–¥—ñ—Å–ª–∞—Ç–∏      </span>              <span class="text-white text-xl transition-transform duration-300 group-hover:translate-x-1">‚úâÔ∏è</span>            </template>          </div>        </button>      </form>    </div>    <Transition name="fade">      <div          v-if="success"          class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black/90 text-white px-8 py-6 rounded-xl text-center shadow-xl backdrop-blur-lg z-50"      >        <p class="text-lg font-semibold mb-2">‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!</p>        <p class="text-white/70">–û—á—ñ–∫—É–π—Ç–µ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–æ—Ç—è–≥–æ–º –¥–Ω—è üí¨</p>      </div>    </Transition>  </div></template><style lang="scss">.fade-enter-active,.fade-leave-active {  transition: opacity 0.3s ease;}.fade-enter-from,.fade-leave-to {  opacity: 0;}</style>